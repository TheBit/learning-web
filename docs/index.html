<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Webpack Hello World</title>
    <link rel="stylesheet" href="styles.css">
<!--    <script defer src="https://unpkg.com/web-vitals@0.2.2/dist/web-vitals.es5.umd.min.js"></script>-->
    <script>
        addEventListener('DOMContentLoaded', function() {
            /*
            webVitals.getCLS((metric) => document.write(metric.name + ': ' + metric.value + '<hr>'));
            webVitals.getFID((metric) => document.write(metric.name + ': ' + metric.value + '<hr>'));
            webVitals.getFCP((metric) => document.write(metric.name + ': ' + metric.value + '<hr>'));
            webVitals.getLCP((metric) => document.write(metric.name + ': ' + metric.value + '<hr>'));
            webVitals.getTTFB((metric) => document.write(metric.name + ': ' + metric.value + '<hr>'));
            */
            function log(message) {
                document.querySelector('#log').innerHTML += `${message}<br>`;
            }
            log(PerformanceObserver.supportedEntryTypes);

            try {
                let lcp;

                const po = new PerformanceObserver((entryList) => {
                    const entries = entryList.getEntries();
                    const lastEntry = entries[entries.length - 1];

                    // Update `lcp` to the latest value, using `renderTime` if it's available,
                    // otherwise using `loadTime`. (Note: `renderTime` may not be available on
                    // image elements loaded cross-origin without the `Timing-Allow-Origin` header.)
                    lcp = lastEntry.renderTime || lastEntry.loadTime;
                    log('LCP: ' + lcp);
                });

                po.observe({type: 'largest-contentful-paint', buffered: true});

                // Send data to the server.
                addEventListener('visibilitychange', function fn() {
                    if (lcp && document.visibilityState === 'hidden') {
                        log('LCP (on hide): ' + lcp);
                        removeEventListener('visibilitychange', fn, true);
                    }
                }, true);
            } catch (e) {
                // Do nothing if the browser doesn't support this API.
            }
        });
    </script>
    <script>
        let script = document.createElement('script');
        script.src = "debug.js";

        document.head.append(script);
    </script>
</head>
<body>
    <h1>Webpack Hello World</h1>
    <div><a href="index2.html">index2</a></div><br>
    Log:<hr>
    <div id="log" style="background-color: #EEEEEE"></div>
    <hr>
</body>
</html>
